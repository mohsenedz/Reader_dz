
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Deutsch Stimmen Leser</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    select, button, input { margin: 5px 0; width: 100%; padding: 10px; font-size: 16px; }
  </style>
</head>
<body>

<h1>Deutsch Stimmen Leser</h1>

<label for="voice1">Stimme 1 (Max):</label>
<select id="voice1"></select>

<label for="voice2">Stimme 2 (Lisa):</label>
<select id="voice2"></select>

<label for="speed1">Geschwindigkeit Stimme 1:</label>
<input type="number" id="speed1" value="1" step="0.1" min="0.5" max="2">

<label for="speed2">Geschwindigkeit Stimme 2:</label>
<input type="number" id="speed2" value="1" step="0.1" min="0.5" max="2">

<label for="text">Text eingeben:</label>
<textarea id="text" rows="6" style="width: 100%;"></textarea>

<button id="start">Start</button>
<button id="stop">Stop</button>

<script>
let voices = [];
let utterances = [];
let currentIndex = 0;
let speaking = false;

function loadVoices() {
  voices = speechSynthesis.getVoices();
  const germanVoices = voices.filter(voice => voice.lang.startsWith('de'));

  const voice1Select = document.getElementById('voice1');
  const voice2Select = document.getElementById('voice2');
  voice1Select.innerHTML = '';
  voice2Select.innerHTML = '';

  germanVoices.forEach((voice, index) => {
    const option1 = document.createElement('option');
    option1.value = index;
    option1.textContent = voice.name;
    voice1Select.appendChild(option1);

    const option2 = document.createElement('option');
    option2.value = index;
    option2.textContent = voice.name;
    voice2Select.appendChild(option2);
  });
}

speechSynthesis.onvoiceschanged = loadVoices;

function startReading() {
  const text = document.getElementById('text').value;
  const lines = text.split('\n').filter(line => line.trim() !== '');
  if (lines.length === 0) return;

  const voice1Index = parseInt(document.getElementById('voice1').value);
  const voice2Index = parseInt(document.getElementById('voice2').value);
  const speed1 = parseFloat(document.getElementById('speed1').value);
  const speed2 = parseFloat(document.getElementById('speed2').value);

  utterances = lines.map((line, idx) => {
    const utterance = new SpeechSynthesisUtterance(line);
    utterance.voice = (idx % 2 === 0) ? voices[voice1Index] : voices[voice2Index];
    utterance.rate = (idx % 2 === 0) ? speed1 : speed2;
    return utterance;
  });

  currentIndex = 0;
  speaking = true;
  speakNext();
}

function speakNext() {
  if (!speaking || currentIndex >= utterances.length) {
    speaking = false;
    return;
  }

  speechSynthesis.speak(utterances[currentIndex]);
  utterances[currentIndex].onend = () => {
    currentIndex++;
    speakNext();
  };
}

function stopReading() {
  speaking = false;
  speechSynthesis.cancel();
}

document.getElementById('start').addEventListener('click', startReading);
document.getElementById('stop').addEventListener('click', stopReading);
</script>

</body>
</html>
