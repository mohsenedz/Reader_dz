<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>German Dual Voice Reader</title>
  <script src="https://code.responsivevoice.org/responsivevoice.js?key=free"></script>
</head>
<body>

<h1>German Dual Voice Reader</h1>

<textarea id="textInput" rows="8" cols="50" placeholder="اكتب نص الحوار هنا..."></textarea><br><br>

<label>الصوت الأول (مثلا Max):</label><br>
<select id="voice1"></select><br><br>

<label>سرعة الصوت الأول:</label><br>
<input type="range" id="rate1" min="0.5" max="2" step="0.1" value="1"><br><br>

<label>الصوت الثاني (مثلا Lisa):</label><br>
<select id="voice2"></select><br><br>

<label>سرعة الصوت الثاني:</label><br>
<input type="range" id="rate2" min="0.5" max="2" step="0.1" value="1"><br><br>

<button onclick="startReading()">بدء القراءة</button>
<button onclick="stopReading()">إيقاف</button>

<script>
// الأصوات المتاحة
const voices = [
  {name: "Deutsch Male", value: "Deutsch Male"},
  {name: "Deutsch Female", value: "Deutsch Female"},
];

// ملء القوائم بالصوتين
const voice1Select = document.getElementById('voice1');
const voice2Select = document.getElementById('voice2');

voices.forEach(voice => {
  const option1 = document.createElement('option');
  option1.value = voice.value;
  option1.textContent = voice.name;
  voice1Select.appendChild(option1);

  const option2 = document.createElement('option');
  option2.value = voice.value;
  option2.textContent = voice.name;
  voice2Select.appendChild(option2);
});

function startReading() {
  const text = document.getElementById('textInput').value.trim();
  if (!text) return;

  const parts = text.split('\n'); // افترض أن كل جملة في سطر منفصل
  let index = 0;

  function readNext() {
    if (index >= parts.length) return;

    const currentLine = parts[index];
    let voice, rate;

    if (index % 2 === 0) {
      voice = document.getElementById('voice1').value;
      rate = parseFloat(document.getElementById('rate1').value);
    } else {
      voice = document.getElementById('voice2').value;
      rate = parseFloat(document.getElementById('rate2').value);
    }

    responsiveVoice.speak(currentLine, voice, {rate: rate, onend: readNext});
    index++;
  }

  readNext();
}

function stopReading() {
  responsiveVoice.cancel();
}
</script>

</body>
</html>
